<div class="grid">
	<div class="col-12">
		<div class="card">
			<button type="button" (click)="openNew()"
				style="background-color: aliceblue; width:4rem; height: 5rem; font-size: 5rem;   font-weight:bold;"
				class="layout-config-button p-link">
				<i pbadge="" value="2" class="p-element pi pi-shopping-cart mr-4 p-text-secondary p-overlay-badge"
					style="font-size: 2rem;"><span id="pr_id_15_badge" class="p-badge p-component p-badge-no-gutter">{{
						productsSh.length }}</span></i>
			</button>

			<p-dataView #dv [value]="products" [paginator]="true" [rows]="9" filterBy="name" [sortField]="sortField"
				[sortOrder]="sortOrder" layout="grid">
				<ng-template pTemplate="header">
					<div class="flex flex-column md:flex-row md:justify-content-between gap-2">
						<p-dropdown [options]="sortOptions" placeholder="Ordena Por precio"
							(onChange)="onSortChange($event)"></p-dropdown>
						<span class="p-input-icon-left">
							<i class="pi pi-search"></i>
							<input type="search" pInputText placeholder="Buscar por Nombre"
								(input)="onFilter(dv, $event)">
						</span>
						<span class="p-input-icon-right">
							<p-dataViewLayoutOptions>
							</p-dataViewLayoutOptions>
						</span>

					</div>
				</ng-template>

				<ng-template let-product pTemplate="listItem">
					<div class="col-12">
						<div class="flex flex-column md:flex-row align-items-center p-3 w-full">
							<img [src]="'assets/demo/images/product/' + product.image" [alt]="product.name"
								class="my-4 md:my-0 w-9 md:w-10rem shadow-2 mr-5" />
							<div class="flex-1 flex flex-column align-items-center text-center md:text-left">
								<div class="font-bold text-2xl">{{product.name}}</div>
								<div class="mb-2">{{product.description}}</div>
								<p-rating [ngModel]="product.rating" [readonly]="true" [cancel]="false"
									styleClass="mb-2"></p-rating>
								<div class="flex align-items-center mt-2">
									<i class="pi pi-tag mr-2"></i>
									<span class="font-semibold">{{product.category}}</span>
								</div>
							</div>
							<div
								class="flex flex-row md:flex-column justify-content-between w-full md:w-auto align-items-center md:align-items-end mt-5 md:mt-0">
								<span
									class="text-2xl font-semibold mb-2 align-self-center md:align-self-end">${{product.price}}</span>
								<p-button icon="pi pi-shopping-cart" label="Add to Cart"
									[disabled]="product.inventoryStatus === 'OUTOFSTOCK'"
									styleClass="mb-2 p-button-sm"></p-button>
								<span
									[class]="'product-badge status-' + product.inventoryStatus.toLowerCase()">{{product.inventoryStatus}}</span>
							</div>
						</div>
					</div>
				</ng-template>

				<ng-template let-product pTemplate="gridItem" style="background: rgb(245,245,245);
				background: linear-gradient(0deg, rgba(245,245,245,1) 0%, rgba(255,255,255,1) 40%);">
					<div class="col-12 md:col-4">
						<div class="card m-3 border-1 surface-border">
							<div class="flex flex-wrap gap-2 align-items-center justify-content-between mb-2">
								<div class="flex align-items-center">
									<i class="pi pi-tag mr-2"></i>
									<span class="font-semibold">{{product.category}}</span>
								</div>
								<span
									[class]="'product-badge status-' + product.inventoryStatus.toLowerCase()">{{product.inventoryStatus}}</span>
							</div>
							<div class="flex flex-column align-items-center text-center mb-3">
								<img [src]="'assets/demo/images/product/' + product.image" [alt]="product.name"
									class="w-9 shadow-2 my-3 mx-0" />
								<div class="text-2xl font-bold">{{product.name}}</div>
								<div class="mb-3">{{product.description}}</div>
								<p-rating [ngModel]="product.rating" [readonly]="true" [cancel]="false"></p-rating>
							</div>
							<div class="flex align-items-center justify-content-between">
								<span class="text-2xl font-semibold">${{product.price}}</span>
								<span class="p-buttonset">
									<button pbutton="" pripple="" label="info" icon="pi pi-search"
										class="p-element p-ripple p-button p-button-secondary p-component"><span
											class="p-button-icon p-button-icon-left pi pi-search"
											(click)="op2.toggle($event)"></span>
									</button>
									<p-overlayPanel #op2 [showCloseIcon]="true" [style]="{width: '700px'}">
										<ng-template pTemplate>
											<div class="card m-3 border-1 surface-border">
												<div
													class="flex flex-wrap gap-2 align-items-center justify-content-between mb-2">
													<div class="flex align-items-center">
														<i class="pi pi-tag mr-2"></i>
														<span class="font-semibold">{{product.category}}</span>
													</div>
													<span
														[class]="'product-badge status-' + product.inventoryStatus.toLowerCase()">{{product.inventoryStatus}}</span>
												</div>
												<div class="flex flex-column align-items-center text-center mb-3">
													<img [src]="'assets/demo/images/product/' + product.image"
														[alt]="product.name" class="w-9 shadow-2 my-3 mx-0" />
													<div class="text-2xl font-bold">{{product.name}}</div>
													<div class="mb-3">
														Lorem ipsum dolor sit amet consectetur, adipisicing elit. Esse
														vero iste qui dolorem. Reprehenderit, saepe excepturi fugiat
														tempore aliquid laudantium. Harum consectetur ullam dignissimos
														libero ab perferendis ducimus iusto fuga consequuntur! Impedit
														maiores similique excepturi voluptatem ipsum omnis alias
														tempore, aperiam ex facilis recusandae vel quam, cupiditate
														voluptas sint! Nisi.
													</div>
													<p-rating [ngModel]="product.rating" [readonly]="true"
														[cancel]="false"></p-rating>
												</div>
												<div class="flex align-items-center justify-content-between">
													<span class="text-2xl font-semibold">${{product.price}}</span>
												</div>
											</div>
										</ng-template>
									</p-overlayPanel>
									<button (click)="addShoppe(product)"
										[disabled]="product.inventoryStatus === 'OUTOFSTOCK'" pbutton="" pripple=""
										label="Delete" icon="pi pi-shopping-cart"
										class="p-element p-ripple p-button p-component"><span
											class="p-button-icon p-button-icon-left pi pi-shopping-cart"
											aria-hidden="true"></span>
									</button>
								</span>


							</div>
						</div>
					</div>
				</ng-template>
			</p-dataView>
		</div>
	</div>

</div>

<p-dialog [(visible)]="productDialog" [style]="{width: '600px'}" header="Detalles De Factura" [modal]="true"
	class="p-fluid">
	<ng-template pTemplate="content">
		<div class="card">
			<h5>Productos</h5>
			<p-table [value]="productsSh" [paginator]="true" [rows]="3" responsiveLayout="scroll">
				<ng-template pTemplate="header">
					<tr>
						<th>Imagen</th>
						<th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
						<th pSortableColumn="price">Price <p-sortIcon field="price"></p-sortIcon></th>
						<th>Opciones</th>
					</tr>
				</ng-template>
				<ng-template pTemplate="body" let-product>
					<tr>
						<td style="width: 15%; min-width: 5rem;">
							<img src="assets/demo/images/product/{{product.image}}" class="shadow-4"
								alt="{{product.name}}" width="50">
						</td>
						<td style="width: 35%; min-width: 7rem;">{{product.name}}</td>
						<td style="width: 35%; min-width: 8rem;">{{product.price | currency:'USD'}}</td>
						<td style="width: 15%;">
							<button pButton pRipple type="button" icon="pi pi-trash"
								class="p-button p-component p-button-text p-button-danger p-button-icon-only"
								(click)="deleteProduct(product)"></button>
						</td>
					</tr>
				</ng-template>
			</p-table>
		</div>
	</ng-template>

	<ng-template pTemplate="footer">
		<div class="col-12 lg:col-12 xl:col-12">
			<div class="card mb-0">
				<div class="flex justify-content-between mb-3">
					<div>
						<span class="block text-500 font-medium mb-3">
							<h3><strong>Total:</strong></h3>
						</span>
						<div class="text-1000 font-medium text-xl">${{this.totalInfo}}</div>
					</div>
					<div class="flex align-items-center justify-content-center bg-orange-100 border-round"
						[ngStyle]="{width: '7.5rem', height: '3rem'}">

						<a (click)="endShoope()">
							<i class="pi pi-shopping-cart text-red-500 text-xl mb-2"></i><strong
								class="mb-1 text-red-500"> FINALIZAR</strong>
						</a>
					</div>
				</div>

				<span class="text-green-500 font-medium">{{productsSh.length}} </span>
				<span class="text-500">en la canasta de compra</span>

			</div>
		</div>
	</ng-template>
</p-dialog>

<p-sidebar [(visible)]="finalForm" [fullScreen]="true" [baseZIndex]="10000">

	<h3 style="font-weight:normal">Formulario de cliente</h3>
	<div class="card col-6 mb-3">
		<h5>Advanced</h5>
		<div class="p-fluid p-formgrid grid">
			<div class="field col-12 md:col-6"><label htmlfor="firstname2">Firstname</label><input pinputtext=""
					id="firstname2" type="text" class="p-inputtext p-component p-element"></div>
			<div class="field col-12 md:col-6"><label htmlfor="lastname2">Lastname</label><input pinputtext=""
					id="lastname2" type="text" class="p-inputtext p-component p-element"></div>
			<div class="field col-12"><label htmlfor="address">Address</label><input pinputtextarea="" id="address"
					rows="4" class="p-inputtextarea p-inputtext p-component p-element"></div>
			<div class="field col-12 md:col-6"><label htmlfor="city">City</label><input pinputtext="" id="city"
					type="text" class="p-inputtext p-component p-element"></div>
			<div class="field col-12 md:col-3"><label htmlfor="state">State</label><p-dropdown optionlabel="name"
					class="p-element p-inputwrapper p-inputwrapper-filled ng-untouched ng-valid ng-dirty">
					<div class="p-dropdown p-component">
						<div class="p-hidden-accessible"><input type="text" readonly="" aria-haspopup="listbox"
								pautofocus="" role="combobox" class="p-element" aria-expanded="false"></div><span
							class="p-element p-dropdown-label p-inputtext ng-star-inserted" id="pr_id_6_label">Option
							1<!----><!----><!----></span><!----><!----><!----><!---->
						<div role="button" aria-label="dropdown trigger" aria-haspopup="listbox"
							class="p-dropdown-trigger"><span class="p-dropdown-trigger-icon pi pi-chevron-down"></span>
						</div><p-overlay class="p-element ng-tns-c45-73 ng-star-inserted"><!----></p-overlay>
					</div>
				</p-dropdown></div>
			<div class="field col-12 md:col-3"><label htmlfor="zip">Zip</label><input pinputtext="" id="zip" type="text"
					class="p-inputtext p-component p-element"></div>
		</div>
	</div>

</p-sidebar>

<div class="flex flex-wrap gap-2">
	<button pButton type="button" (click)="finalForm = true" icon="pi pi-external-link"
		class="p-button-warning"></button>
</div>